<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Theqa</title>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    <link rel="manifest" href="img/site.webmanifest">
    <link rel="mask-icon" href="img/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">
    <meta name="description" content="Page description">
    <!--Twitter Card data-->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@publisher_handle">
    <meta name="twitter:title" content="Page Title">
    <meta name="twitter:description" content="Page description less than 200 characters">
    <meta name="twitter:creator" content="@author_handle">
    <meta name="twitter:image" content="http://www.example.com/image.jpg">
    <!--Open Graph data-->
    <meta property="og:title" content="Title Here">
    <meta property="og:type" content="article">
    <meta property="og:url" content="http://www.example.com/">
    <meta property="og:image" content="http://example.com/image.jpg">
    <meta property="og:description" content="Description Here">
    <meta property="og:site_name" content="Site Name, i.e. Moz">
    <meta property="fb:admins" content="Facebook numeric ID">
    <link rel="stylesheet" media="all" href="css/app.css">
    <link rel="stylesheet" media="all" href="src/style.css">
    <link rel="stylesheet" media="all" href="css/mainApp.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        #loadingSpinner {
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            background: #a1a1a10f;
        }

        /* Spinner styles */
        .spinner {
            position: relative;
            height: 120px;
            width: 120px;
        }

        .spinner .rot {
            border: 3px solid transparent;
            border-top-color: #009CF8;
            border-radius: 50%;
            -webkit-border-radius: 50%;
            -moz-border-radius: 50%;
            -ms-border-radius: 50%;
            -o-border-radius: 50%;
            animation-name: rotate;
            animation-timing-function: linear;
            animation-iteration-count: infinite;
            position: absolute;
        }

        .spinner .rot:first-child {
            width: 90px;
            height: 90px;
            animation-duration: 1s;
            left: 20px;
            top: 25px;
        }

        .spinner .rot:nth-child(2) {
            width: 60px;
            height: 60px;
            animation-duration: 1.5s;
            left: 35px;
            top: 35px;
        }

        .spinner .rot:last-child {
            width: 30px;
            height: 30px;
            animation-duration: 2s;
            top: 46px;
            left: 49px;

        }

        @keyframes rotate {
            to {
                transform: rotate(360deg);
                -webkit-transform: rotate(360deg);
                -moz-transform: rotate(360deg);
                -ms-transform: rotate(360deg);
                -o-transform: rotate(360deg);
            }
        }

        /* Hide content initially */
        #content {
            display: none;
        }
    </style>
    <script>
        // Check if the user is logged in
        window.onload = function () {
            const accountType = localStorage.getItem('accountType');

            if (accountType === 'employee') {
                document.querySelector('.employee-content').style.display = 'block';
            } else if (accountType === 'company') {
                document.querySelector('.company-content').style.display = 'block';
            }

        }
    </script>
</head>

<body>
    <div id="loadingSpinner" class="loading">
        <div id="spinner" class="spinner">
            <div class="rot"></div>
            <div class="rot"></div>
            <div class="rot"></div>
        </div>
    </div>

    <!-- ### Employee ## -->
    <div class="out" id="root">

        <div class="page2 js-page2">

            <!-- The Header -->
            <div class="header2 js-header2">
                <a class="header2__logo" href="index.html">
                    <img class="header2__pic header2__pic_black" src="img/logo.svg" alt="" />
                    <img class="header2__pic header2__pic_white" src="img/logo-white.svg" alt="" />
                </a>
                <div class="header2__search">
                    <button class="header2__open"><svg class="icon icon-search">
                            <use xlink:href="img/sprite.svg#icon-search"></use>
                        </svg>
                    </button>
                    <!-- <input class="header2__input" type="text" placeholder="Search" /> -->
                </div>

                <div class="flex items-center">
                    <div class="header2__group">
                        <a class="header2__link header2__link_bell active" href="square-notifications.html">
                            <svg class="icon icon-bell">
                                <use xlink:href="img/sprite.svg#icon-bell"></use>
                            </svg>
                        </a>
                    </div>


                    <div class="main-avatar">
                        <div class="header2__profile user-avatar flex justify-start items-center gap-2"
                            onclick="toggleDropdown()">
                            <img class="header2__pic" src="img/ava-1.png" alt="" />
                            <svg class="arrow-icon" width="10" height="10" viewBox="0 0 10 10"
                                xmlns="http://www.w3.org/2000/svg">
                                <path d="M0 0 L5 5 L10 0 Z" fill="#333" />
                            </svg>
                        </div>
                        <div class="dropdown-menu" id="dropdownMenu">
                            <div class="info-avatar py-[10px] px-[20px] border-solid border-b-[1px] border-[#e5e7eb]">
                                <h3 id="userName" class="font-bold text-gray-900 dark:text-gray-100"></h3>
                                <h6 id="userJob" class="text-xs text-[#009CF8]"></h6>
                            </div>
                            <span class="dropdown-item block">
                                <a href="profile.html" class="flex gap-2 items-center w-full">
                                    <span class="text-xl opacity-50"><svg stroke="currentColor" fill="none"
                                            stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" height="1em"
                                            width="1em" xmlns="http://www.w3.org/2000/svg">
                                            <path stroke-linecap="round" stroke-linejoin="round"
                                                d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z">
                                            </path>
                                        </svg></span>
                                    <span>Profile</span>
                                </a>
                            </span>
                            <span class="dropdown-item flex gap-2 items-center w-full" onclick="logout()">
                                <span class="text-xl opacity-50"><svg stroke="currentColor" fill="none" stroke-width="2"
                                        viewBox="0 0 24 24" aria-hidden="true" height="1em" width="1em"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round"
                                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1">
                                        </path>
                                    </svg></span>
                                <span>Logout</span>
                            </span>
                        </div>
                    </div>
                </div>
                <div class="header2__bg js-header2-bg"></div>
            </div>


            <div class="page6__wrapper">
                <div class="sidebar6 js-sidebar6">
                    <div class="sidebar6__top"><button class="sidebar6__close js-sidebar6-close"><svg
                                class="icon icon-close">
                                <use xlink:href="img/sprite.svg#icon-close"></use>
                            </svg></button><a class="sidebar6__logo" href="#"><img
                                class="sidebar6__pic sidebar6__pic_black" src="img/logo.svg" alt="" /><img
                                class="sidebar6__pic sidebar6__pic_white" src="img/logo-white.svg" alt="" /></a></div>
                    <div class="sidebar6__wrapper">
                        <div class="sidebar6__nav"><a class="sidebar6__item" href="#"><svg class="icon icon-dashboard">
                                    <use xlink:href="img/sprite.svg#icon-dashboard"></use>
                                </svg>Dashboard</a><a class="sidebar6__item active" href="circle-job-search.html"><svg
                                    class="icon icon-search">
                                    <use xlink:href="img/sprite.svg#icon-search"></use>
                                </svg>Job Search</a><a class="sidebar6__item" href="#"><svg
                                    class="icon icon-calendar-1">
                                    <use xlink:href="img/sprite.svg#icon-calendar-1"></use>
                                </svg>Schedule</a><a class="sidebar6__item" href="circle-history.html"><svg
                                    class="icon icon-clock">
                                    <use xlink:href="img/sprite.svg#icon-clock"></use>
                                </svg>History</a><a class="sidebar6__item" href="circle-administration.html"><svg
                                    class="icon icon-check-square">
                                    <use xlink:href="img/sprite.svg#icon-check-square"></use>
                                </svg>Events</a></div>
                    </div><label class="switch switch_theme"><input class="switch__input js-switch-theme"
                            type="checkbox" /><span class="switch__in"><span class="switch__box"></span><span
                                class="switch__icon"><svg class="icon icon-moon">
                                    <use xlink:href="img/sprite.svg#icon-moon"></use>
                                </svg><svg class="icon icon-sun">
                                    <use xlink:href="img/sprite.svg#icon-sun"></use>
                                </svg></span></span></label>
                </div>
                <div class="page6__center">
                    <div class="page6__filters js-page6-filters">
                        <div class="page6__fieldset">
                            <div class="page6__field flex-1">
                                <input id="searchTitle" class="page6__input" type="text"
                                    placeholder="Job Tittle, Company, or Anything">
                                <div class="page6__icon">
                                    <svg class="icon icon-search">
                                        <use xlink:href="img/sprite.svg#icon-search"></use>
                                    </svg>
                                </div>
                            </div>
                            <div class="page6__field flex-1">
                                <input id="searchType" class="page6__input" type="text" placeholder="Job Type">
                                <div class="page6__icon">
                                    <svg class="icon icon-briefcase">
                                        <use xlink:href="img/sprite.svg#icon-briefcase"></use>
                                    </svg>
                                </div>
                            </div>
                            <div class="page6__field flex-1">
                                <input id="searchSalary" class="page6__input" type="text" placeholder="Salary Range">
                                <div class="page6__icon">
                                    <svg class="icon icon-salary">
                                        <use xlink:href="img/sprite.svg#icon-salary"></use>
                                    </svg>
                                </div>
                            </div>
                        </div>
                        <button class="page6__btn btn btn_blue" onclick="filterJobs()">Search</button>
                        <button class="page6__btn btn btn_gray js-page6-btn">
                            <span class="btn__text">See More</span>
                            <svg class="icon icon-arrow-down">
                                <use xlink:href="img/sprite.svg#icon-arrow-down"></use>
                            </svg>
                        </button>
                    </div>
                    <div class="jobs">
                        <div class="jobs__row">
                            <div class="jobs__filters">
                                <div class="filters1 js-filters1">
                                    <div class="filters1__top">
                                        <button class="filters1__close js-filters1-close">
                                            <svg class="icon icon-close">
                                                <use xlink:href="img/sprite.svg#icon-close"></use>
                                            </svg>
                                        </button>
                                        <div class="filters1__title">Filter</div>
                                    </div>
                                    <div class="filters1__wrap">
                                        <!-- Employee Type Filter -->
                                        <div class="filters1__item js-accord-item active">
                                            <div class="filters1__head js-accord-head">Employee Type</div>
                                            <div class="filters1__body js-accord-body" style="display: block;">
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input employee-type" type="checkbox"
                                                        value="Full Time Jobs">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Full Time Jobs</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input employee-type" type="checkbox"
                                                        value="Part Time Jobs">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Part Time Jobs</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input employee-type" type="checkbox"
                                                        value="Remote Jobs">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Remote Jobs</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input employee-type" type="checkbox"
                                                        value="Internship Jobs">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Internship Jobs</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input employee-type" type="checkbox"
                                                        value="Contract">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Contract</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input employee-type" type="checkbox"
                                                        value="Training Jobs">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Training Jobs</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <!-- Add more checkboxes as needed -->
                                            </div>
                                        </div>

                                        <!-- Work Level Filter -->
                                        <div class="filters1__item js-accord-item active">
                                            <div class="filters1__head js-accord-head">Work Level</div>
                                            <div class="filters1__body js-accord-body" style="display: block;">
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input work-level" type="checkbox"
                                                        value="Student">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Student</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input work-level" type="checkbox"
                                                        value="Entry Level">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Entry Level</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input work-level" type="checkbox"
                                                        value="Mid Level">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Mid Level</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input work-level" type="checkbox"
                                                        value="Senior Level">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Senior Level</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input work-level" type="checkbox"
                                                        value="Directors">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">Directors</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input work-level" type="checkbox"
                                                        value="VP or Above">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">VP or Above</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <!-- Add more checkboxes as needed -->
                                            </div>
                                        </div>

                                        <!-- Salary Range Filter -->
                                        <div class="filters1__item js-accord-item active">
                                            <div class="filters1__head js-accord-head">Salary Range</div>
                                            <div class="filters1__body js-accord-body" style="display: block;">
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input salary-range" type="checkbox"
                                                        value="0-1000">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">$0 - $1000</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input salary-range" type="checkbox"
                                                        value="1000-4000">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">$1000 - $4000</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input salary-range" type="checkbox"
                                                        value="4000-8000">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">$4000 - $8000</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <label class="checkbox checkbox_green">
                                                    <input class="checkbox__input salary-range" type="checkbox"
                                                        value="8000-12000">
                                                    <span class="checkbox__in">
                                                        <span class="checkbox__tick"></span>
                                                        <span class="checkbox__text">$8000 - $12000</span>
                                                        <span class="checkbox__counter">0</span>
                                                    </span>
                                                </label>
                                                <!-- Add more checkboxes as needed -->
                                            </div>
                                        </div>

                                        <!-- Add other filters similarly -->
                                    </div>
                                </div>
                            </div>
                            <div class="jobs__container">

                                <div class="jobs__head">
                                    <div id="jobCount" class="jobs__title title"></div>
                                    <a class="jobs__open-filters js-jobs-filters" href="#">
                                        <svg class="icon icon-filters-1">
                                            <use xlink:href="img/sprite.svg#icon-filters-1"></use>
                                        </svg>
                                        Filter
                                    </a>
                                </div>

                                <div id="jobsList" class="jobs__list">
                                    <!-- Job items will be inserted here -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <label class="switch switch_theme">
                    <input class="switch__input js-switch-theme" type="checkbox" />
                    <span class="switch__in"><span class="switch__box"></span>
                        <span class="switch__icon">
                            <svg class="icon icon-moon">
                                <use xlink:href="img/sprite.svg#icon-moon"></use>
                            </svg>
                            <svg class="icon icon-sun">
                                <use xlink:href="img/sprite.svg#icon-sun"></use>
                            </svg>
                        </span>
                    </span>
                </label>
            </div>

        </div>

    </div>

    <script src="js/app.js"></script>
    <script src="js/common.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/mainApp.js"></script>

    <script>
        // Check if the user is logged in
        const isEmployeeLoggedIn = localStorage.getItem('employee');
        const isCompanyLoggedIn = localStorage.getItem('company');
        if (!isEmployeeLoggedIn && !isCompanyLoggedIn) {
            // Redirect to sign-in.html if neither is logged in
            window.location.href = 'sign-in.html';
        }
    </script>
    <script>
        const loadingSpinner = document.getElementById('loadingSpinner');
        let jobsData = [];

        async function fetchJobs() {
            try {
                loadingSpinner.style.display = 'flex';
                // Retrieve token from localStorage
                const token = localStorage.getItem('token');
                if (!token) {
                    throw new Error('token not found in localStorage');
                }

                const response = await fetch('https://back.anceega.com/client-api/v1/jobs/get', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}`
                    },
                    redirect: 'follow'
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok: ' + response.statusText);
                }

                const contentType = response.headers.get("content-type");
                if (!contentType || !contentType.includes("application/json")) {
                    throw new TypeError("Received response is not in JSON format");
                }

                const data = await response.json();
                console.log(data)
                jobsData = data.data; // Store jobs data
                displayJobs(jobsData);
                updateFilterCounts();
            } catch (error) {
                console.error('Error fetching job data:', error);
            } finally {
                loadingSpinner.style.display = 'none';
            }
        }

        function updateFilterCounts() {
            // Define filter types
            const filters = {
                'employee-type': ['Full Time Jobs', 'Part Time Jobs', "Remote Jobs", "Internship Jobs", "Contract", "Training Jobs"], // Add other types as needed
                'work-level': ['Student', 'Entry Level', 'Mid Level', 'Senior Level', 'Directors', 'VP or Above'], // Add other levels as needed
                'salary-range': ['0-1000', '1000-4000', '4000-8000', '8000', '12000'] // Add other ranges as needed
            };
    
            // Calculate counts for each filter type
            for (let filterType in filters) {
                filters[filterType].forEach(filterValue => {
                    const count = jobsData.filter(job => {
                        switch (filterType) {
                            case 'employee-type':
                                return job.employee_type.toLowerCase() === filterValue.toLowerCase();
                            case 'work-level':
                                return job.work_level.toLowerCase() === filterValue.toLowerCase();
                            case 'salary-range':
                                const [min, max] = filterValue.split('-').map(Number);
                                const jobSalary = parseFloat(job.salary.replace(/[^0-9.-]+/g, ""));
                                return jobSalary >= min && jobSalary <= max;
                            default:
                                return false;
                        }
                    }).length;
    
                    // Update the count in the checkbox label
                    const checkboxLabel = document.querySelector(`.${filterType}[value="${filterValue}"]`).closest('label').querySelector('.checkbox__counter');
                    checkboxLabel.innerText = count;
                });
            }
        }

        function displayJobs(jobs) {
            const jobsList = document.getElementById('jobsList');
            jobsList.innerHTML = ''; // Clear previous list items

            const jobCount = document.getElementById('jobCount');
            jobCount.innerText = `Showing ${jobs.length} Jobs`;

            jobs.forEach((job, index) => {
                const jobItem = document.createElement('div');
                jobItem.className = 'jobs__item flex flex-col justify-between gap-3';

                jobItem.innerHTML = `
                    <div class="">
                        <div class="jobs__logo">
                            <img class="jobs__pic" src="img/tokopedia.png" alt="">
                        </div>
                        <a class="jobs__title" href="job-details.html?id=${index}">${job.job_name}
                            <svg class="icon icon-get-location">
                                <use xlink:href="img/sprite.svg#icon-get-location"></use>
                            </svg>
                        </a>
                        <div class="jobs__info">${job.job_description}</div>
                        <div class="jobs__tags">
                            <div class="jobs__tag">${job.employee_type}</div>
                            <div class="jobs__tag">${job.experience}</div>
                            <div class="jobs__tag">${job.job_category}</div>
                        </div>
                    </div>
                    <div class="jobs__btns">
                        <a class="" href="job-details.html?id=${index}">
                            <button class="jobs__btn btn btn_blue">Apply Now</button>
                        </a>
                    </div>
                `;

                jobsList.appendChild(jobItem);
            });
        }

        function filterJobs() {
            const title = document.getElementById('searchTitle').value.toLowerCase();
            const type = document.getElementById('searchType').value.toLowerCase();

            // Parse salary input from text input
            const salaryInput = document.getElementById('searchSalary').value;
            let minSalary = 0, maxSalary = Number.MAX_VALUE;
            if (salaryInput.includes('-')) {
                const [min, max] = salaryInput.split('-').map(s => parseFloat(s.trim()));
                minSalary = isNaN(min) ? minSalary : min;
                maxSalary = isNaN(max) ? maxSalary : max;
            } else if (salaryInput) {
                minSalary = parseFloat(salaryInput.trim());
            }

            // Get selected employee types
            const selectedEmployeeTypes = Array.from(document.querySelectorAll('.employee-type:checked')).map(el => el.value.toLowerCase());

            // Get selected work levels
            const selectedWorkLevels = Array.from(document.querySelectorAll('.work-level:checked')).map(el => el.value.toLowerCase());

            // Get selected salary ranges
            const selectedSalaryRanges = Array.from(document.querySelectorAll('.salary-range:checked')).map(el => el.value);

            // If all fields are empty and no checkboxes are selected, show all jobs
            if (title === "" && type === "" && !salaryInput && selectedEmployeeTypes.length === 0 && selectedWorkLevels.length === 0 && selectedSalaryRanges.length === 0) {
                displayJobs(jobsData);
                return;
            }

            const filteredJobs = jobsData.filter(job => {
                const matchesTitle = title === "" || job.job_name.toLowerCase().includes(title) ;
                const matchesType = type === "" || job.employee_type.toLowerCase().includes(type);
                const matchesSalary = job.salary >= minSalary && job.salary <= maxSalary;

                // Check if job salary matches any of the selected salary ranges
                let matchesSalaryRange = true;
                if (selectedSalaryRanges.length > 0) {
                    matchesSalaryRange = selectedSalaryRanges.some(range => {
                        const [min, max] = range.replace('$', '').split('-').map(s => parseFloat(s.trim()));
                        console.log(min, max)
                        return job.salary >= min && job.salary <= max;
                    });
                }

                const matchesEmployeeType = selectedEmployeeTypes.length === 0 || selectedEmployeeTypes.includes(job.employee_type.toLowerCase());
                const matchesWorkLevel = selectedWorkLevels.length === 0 || selectedWorkLevels.includes(job.work_level.toLowerCase());

                return matchesTitle && matchesType && matchesSalary && matchesSalaryRange && matchesEmployeeType && matchesWorkLevel;
            });

            displayJobs(filteredJobs);
        }

        // Add event listener to the "See More" button
        document.querySelector('.js-page6-btn').addEventListener('click', () => {
            document.querySelector('.js-page6-filters').classList.toggle('show');
        });

        // Add event listeners to checkboxes
        document.querySelectorAll('.checkbox__input').forEach(checkbox => {
            checkbox.addEventListener('change', filterJobs);
        });

        // Fetch jobs data when the page loads
        window.onload = fetchJobs;
    </script>

    <!-- <script>
        let jobsData = [];
        const loadingSpinner = document.getElementById('loadingSpinner');

        async function fetchJobs() {
            try {
                loadingSpinner.style.display = 'flex';
                // Retrieve accountType from localStorage
                const token = localStorage.getItem('token');
                if (!token) {
                    throw new Error('token not found in localStorage');
                }

                const response = await fetch('https://back.anceega.com/client-api/v1/jobs/get', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${token}` // Assuming token is your authentication token
                    },
                    redirect: 'follow' // Ensure to follow redirects
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok: ' + response.statusText);
                }

                const contentType = response.headers.get("content-type");
                if (!contentType || !contentType.includes("application/json")) {
                    throw new TypeError("Received response is not in JSON format");
                }

                const data = await response.json();
                console.log(data); // Log the data for debugging
                jobsData = data.data;
                displayJobs(jobsData);

                document.getElementById('spinner').style.display = 'none';
            } catch (error) {
                console.error('Error fetching job data:', error);
                document.getElementById('spinner').style.display = 'none';
            } finally {
                // Hide loading spinner
                loadingSpinner.style.display = 'none';
            }
        }

        function displayJobs(jobs) {
            const jobsList = document.getElementById('jobsList');
            jobsList.innerHTML = ''; // Clear previous list items

            const jobCount = document.getElementById('jobCount');
            jobCount.innerText = `Showing ${jobs.length} Jobs`;

            jobs.forEach((job, index) => {
                const jobItem = document.createElement('div');
                jobItem.className = 'jobs__item flex flex-col justify-between gap-3';

                jobItem.innerHTML = `
                <div class="">
                    <div class="jobs__logo">
                        <img class="jobs__pic" src="img/tokopedia.png" alt="">
                    </div>
                    <a class="jobs__title" href="job-details.html?id=${index}">${job.job_name}
                        <svg class="icon icon-get-location">
                            <use xlink:href="img/sprite.svg#icon-get-location"></use>
                        </svg>
                    </a>
                    <div class="jobs__info">${job.job_description}</div>
                    <div class="jobs__tags">
                        <div class="jobs__tag">${job.employee_type}</div>
                        <div class="jobs__tag">${job.experience}</div>
                        <div class="jobs__tag">${job.job_category}</div>
                    </div>
                </div>
                <div class="jobs__btns">
                    <a class="" href="job-details.html?id=${index}">
                        <button class="jobs__btn btn btn_blue">Apply Now</button>
                    </a>
                </div>
            `;

                jobsList.appendChild(jobItem);
            });
        }

        // Fetch jobs on page load
        document.addEventListener('DOMContentLoaded', fetchJobs);

        function filterJobs() {
            const title = document.getElementById('searchTitle').value;
            const type = document.getElementById('searchType').value;
            const salary = document.getElementById('searchSalary').value

            // Get selected employee types
            const selectedEmployeeTypes = Array.from(document.querySelectorAll('.employee-type:checked')).map(el => el.value.toLowerCase());

            // Get selected work levels
            const selectedWorkLevels = Array.from(document.querySelectorAll('.work-level:checked')).map(el => el.value.toLowerCase());

            // Get selected salary ranges
            const selectedSalaryRanges = Array.from(document.querySelectorAll('.salary-range:checked')).map(el => el.value);

            let minSalary = 0;
            let maxSalary = Infinity;
            if (salary) {
                const salaryParts = salary.split('-');
                if (salaryParts.length === 2) {
                    minSalary = parseFloat(salaryParts[0].trim());
                    maxSalary = parseFloat(salaryParts[1].trim());
                } else if (salaryParts.length === 1) {
                    minSalary = parseFloat(salaryParts[0].trim());
                }
            }

            // If all fields are empty and no checkboxes are selected, show all jobs
            if (title === "" && type === "" && salary === "" && selectedEmployeeTypes.length === 0 && selectedWorkLevels.length === 0) {
                displayJobs(jobsData);
                return;
            }

            const filteredJobs = jobsData.filter(job => {
                const matchesTitle = title === "" || job.job_name.includes(title);
                const matchesType = type === "" || job.employee_type.includes(type);
                const matchesSalary = !salary || (job.salary >= minSalary && job.salary <= maxSalary);

                // Check if job salary matches any of the selected salary ranges
                let matchesSalaryRange = true;
                if (selectedSalaryRanges.length > 0) {
                    matchesSalaryRange = selectedSalaryRanges.some(range => {
                        const [min, max] = range.replace('$', '').split('-').map(s => parseFloat(s.trim()));
                        console.log(min, max)
                        return job.salary >= min && job.salary <= max;
                    });
                }

                const matchesEmployeeType = selectedEmployeeTypes.length === 0 || selectedEmployeeTypes.includes(job.employee_type.toLowerCase());
                const matchesWorkLevel = selectedWorkLevels.length === 0 || selectedWorkLevels.includes(job.experience.toLowerCase());

                return matchesTitle && matchesType && matchesSalary && matchesEmployeeType && matchesWorkLevel && matchesSalaryRange;
            });

            displayJobs(filteredJobs);
        }


        // Add event listener to the "See More" button
        document.querySelector('.js-page6-btn').addEventListener('click', () => {
            document.querySelector('.js-page6-filters').classList.toggle('show');
        });

        document.querySelectorAll('.checkbox__input').forEach(checkbox => {
            checkbox.addEventListener('change', filterJobs);
        });

    </script> -->
</body>

</html>